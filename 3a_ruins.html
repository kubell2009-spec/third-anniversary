<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ASCII Adventure</title>

  <!-- Use your existing stylesheet -->
  <link rel="stylesheet" href="3a_style.css">

  <!-- Minimal layout tweaks (safe even if you already have these in 3a_style.css) -->
  <style>
    /* Ensure container and ascii positioning are correct */
    body { margin:0; min-height:100vh; display:flex; justify-content:center; align-items:center; }
    .container { text-align:center; width:100%; max-width:1100px; padding:28px; box-sizing:border-box; }

    /* ASCII block centered as an inline-block, but text inside left aligned */
    pre.ascii {
      display:inline-block;   /* shrink-wrap so centering works */
      text-align:left;        /* keep ASCII lines left-aligned */
      white-space:pre;
      margin: 0 0 18px 0;
      font-family: monospace;
      line-height:1.05;
    }

    /* Essay / long text box: contenteditable so typed text can be justified */
    .essay-box {
      width: 90%;
      max-width: 900px;
      min-height: 260px;
      padding: 14px;
      box-sizing: border-box;
      border: 2px solid #0f0;  /* will match your neon green */
      background: #000;        /* keeps the theme */
      color: #0f0;
      margin: 14px auto;
      text-align: justify;     /* make written paragraphs look like an essay */
      outline: none;
      overflow:auto;
      font-family: monospace;
    }

    /* Prompt area (question + buttons) centered */
    .prompt {
      margin-top: 18px;
    }
    .prompt .question {
      margin-bottom: 12px;
      max-width: 900px;
      margin-left:auto;
      margin-right:auto;
      text-align: center;
    }

    /* Buttons container (uses .btn from your stylesheet) */
    .choices { margin-top: 8px; }

    /* Story area where appended texts appear */
    .story {
      margin-top: 18px;
      max-width: 900px;
      margin-left:auto;
      margin-right:auto;
      text-align: left; /* story paragraphs left aligned inside centered column */
      font-family: monospace;
      line-height:1.4;
    }

    /* Restart button styling fallback if .btn isn't loaded for some reason */
    button.btn { /* should match your 3a_style.css .btn, safe fallback */
      display:inline-block; padding:10px 18px; margin:6px; cursor:pointer;
      border:1px solid #0f0; background:#000; color:#0f0; font-family:monospace; font-weight:bold;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- ASCII art: lines are left-aligned but the whole block is centered -->
    <pre class="ascii">
       _.-""}
      / "" ;
  .-"` __] ',               ___
  I_ ""__.`-,;             |   |
    I_.,-"ii"{             !___!
    | ||  ||  |        ,    | |
    | ||  ||  |       .;    | |
    | ||  ||  |       | \   | |
    | ||  ||  |       |  |  | |
    | ||  ||  |       |  |  | |   __
    | ||  ||  |       |  |  | |  |  |
    | ||  ||  |   ;|  |  |  | |  |  |
    | ||  ||  |"\_/`,_|  |  | |  |  |  ___.--""`\
    | ||  ||  |       |  |\.| |=,|  |""          `,
    | ||  ||  |       |  |  | |  |  |____________.-+.__
   _:_!|_,'!__!       |  |  | |_,!  !         __,I   `"|
  :     |      `-""`,.!__!-,!_!_ '--'`,_,--"""         |
  |     ;___          `"-.-'    `,_.-'"            _..-'
   `-._ |   """--,,_     |`""-.--'|         __.--""
       `"--..__     ""--.|    |   |_,_  _.-'
               ""--.._   `-,__!_.-' _,""
                      ""--,____.--'"
    </pre>

    <!-- Prompt + choices -->
    <div class="prompt" id="promptArea">
      <div class="question" id="questionText"> <!-- question text injected here --> </div>

      <div class="choices" id="choiceButtons">
        <!-- choice buttons are injected by JS -->
      </div>
    </div>

    <!-- Where story output appears -->
    <div class="story" id="storyArea" aria-live="polite"></div>
  </div>

<script>
/* --- EDITABLE: define steps and branching here --- */
const STEPS = [
  // step index 0
  {
    prompt: "You find a dim corridor with two doors â€” step forward?",
    yesText: "You step forward into the corridor. The door behind you clicks shut.",
    noText: "You decide not to step forward and the corridor fades. Your adventure ends here.",
    nextYes: 1,   // go to step 1 on YES
    nextNo: null,
    endTextNo: "test test"// end on NO
  },

  // step index 1
  {
    prompt: "A whisper offers a map â€” do you accept it?",
    yesText: "You accept the map. The lines rearrange.",
    noText: "You refuse the map. The whisper is offended.",
    nextYes: 2,    // YES -> step 2
    nextNo: 4      // NO -> jump to step 4 (branch continues instead of ending)
  },

  // step index 2
  {
    prompt: "There is a chest with a strange lock â€” try to open it?",
    yesText: "You pick the lock; inside is a brass key.",
    noText: "You leave the chest sealed. A shadow passes by, uninterested.",
    nextYes: 3,    // YES -> step 3
    nextNo: 3      // NO -> also goes to step 3 (both choices converge)
  },

  // step index 3
  {
    prompt: "The key fits a hatch underfoot â€” descend into the hatch?",
    yesText: "You descend and find a chamber of mirrors.",
    noText: "You decide not to descend. A rumble suggests movement below.",
    nextYes: 4,    // YES -> step 4
    nextNo: null   // NO -> ends
  },

  // step index 4 (passcode step)
{
  type: "passcode",
  prompt: "A pedestal rises. It demands a passcode to proceed.",
  correctCode: "swordfish",   // ðŸ”‘ change this
  successText: "The pedestal glows... You receive CODE PART 3: XYZ123",  // <--- put your secret here
  failureText: "The pedestal rumbles angrily. Wrong code.",
}

];

const FINAL_TEXT = "You reach the heart of the place. The world rearranges and you feel a quiet victory.";
const RESTART_LABEL = "Restart";

/* --- runtime and UI references --- */
let stepIndex = 0;
const questionText = document.getElementById('questionText');
const choiceButtons = document.getElementById('choiceButtons');
const storyArea = document.getElementById('storyArea');

/* Render the current prompt according to nextYes/nextNo */
function renderPrompt() {
  if (stepIndex >= STEPS.length) {
    questionText.textContent = "End of path.";
    choiceButtons.innerHTML = '';
    appendParagraph(FINAL_TEXT);
    choiceButtons.appendChild(createRestartButton());
    return;
  }

  const step = STEPS[stepIndex];
  questionText.textContent = step.prompt;
  choiceButtons.innerHTML = '';

  // --- Special case: passcode step ---
  if (step.type === "passcode") {
    const input = document.createElement('input');
    input.type = 'password';
    input.placeholder = "Enter passcode";
    input.className = "password-input";
    choiceButtons.appendChild(input);

    const submit = document.createElement('button');
    submit.className = 'btn';
    submit.textContent = 'Submit';
    submit.addEventListener('click', () => {
      if (input.value === step.correctCode) {
        appendParagraph(step.successText || "Correct!");

        // âœ… Instead of restart, show Return button
        choiceButtons.innerHTML = '';
        const returnBtn = document.createElement('button');
        returnBtn.className = 'btn';
        returnBtn.textContent = 'Return';
        returnBtn.addEventListener('click', () => {
          appendParagraph("Returning...");
          choiceButtons.innerHTML = '';
          setTimeout(() => {
            window.location.href = "3a_portal.html";
          }, 1000); // 1000 ms = 1 second
        });
        choiceButtons.appendChild(returnBtn);

      } else {
        appendParagraph(step.failureText || "Incorrect.");
        choiceButtons.innerHTML = '';
        choiceButtons.appendChild(createRestartButton());
      }
    });
    choiceButtons.appendChild(submit);
    return; // stop here so YES/NO buttons aren't created
  }

  // --- Default case: YES/NO branching ---
  const yesBtn = document.createElement('button');
  yesBtn.className = 'btn';
  yesBtn.textContent = 'Yes';
  yesBtn.addEventListener('click', () => {
    appendParagraph(step.yesText || '');
    if (typeof step.nextYes === 'number') {
      stepIndex = step.nextYes;
      renderPrompt();
    } else {
      choiceButtons.innerHTML = '';
      appendParagraph(step.endTextYes || '(branch ended)');
      choiceButtons.appendChild(createRestartButton());
      questionText.textContent = "(branch ended)";
    }
  });
  choiceButtons.appendChild(yesBtn);

  const noBtn = document.createElement('button');
  noBtn.className = 'btn';
  noBtn.textContent = 'No';
  noBtn.addEventListener('click', () => {
    appendParagraph(step.noText || '');
    if (typeof step.nextNo === 'number') {
      stepIndex = step.nextNo;
      renderPrompt();
    } else {
      choiceButtons.innerHTML = '';
      appendParagraph(step.endTextNo || '(branch ended)');
      choiceButtons.appendChild(createRestartButton());
      questionText.textContent = "(branch ended)";
    }
  });
  choiceButtons.appendChild(noBtn);
}

/* Utility to append story paragraphs */
function appendParagraph(text) {
  const p = document.createElement('p');
  p.style.margin = '10px 0';
  p.textContent = text;
  storyArea.appendChild(p);
  p.scrollIntoView({ behavior: 'smooth', block: 'end' });
}

/* Restart button */
function createRestartButton() {
  const r = document.createElement('button');
  r.className = 'btn';
  r.textContent = RESTART_LABEL;
  r.addEventListener('click', () => {
    restartAdventure();
  });
  return r;
}

function restartAdventure() {
  stepIndex = 0;
  storyArea.innerHTML = '';
  renderPrompt();
  // optional: reset essay box
  // document.querySelector('.essay-box').innerHTML = '(write your essay here...)';
}

/* Initialize */
(function init(){
  renderPrompt();
})();
</script>

</body>
</html>





